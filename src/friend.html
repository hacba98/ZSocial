<html>
	<head>
		<title> Z-Social </title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" type="text/css" href="friend/friend.css">
		<script language="javascript">
			function addFriend(){
				var friend_username = document.addfriendForm.friend_username.value;
				var message = document.addfriendForm.message.value;
				var url = "/friend/add";
				var params = "friend_username=" + friend_username + "&message=" + message;
				
				var http = new XMLHttpRequest();
				http.open('POST', url, true);
				http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
				http.onreadystatechange = function (){
					if(http.readyState == 4 && http.status == 200){
						alert("Your request had been sent.");
					} else if (http.status == 500){
						alert("Username " + friend_username + " doesn't existed");
					} else if (http.status == 412){
						alert("You have already sent this request. Please wait for your friend to accept it");
					}
				}
				http.send(params);
			}
		</script>
	</head>
	<body>
		<div class="topnav">
			<a href="/profile/logout">Logout</a>
			<a class="active" href="/friend">Friend</a>
			<a href="/message">Contact</a>
			<a href="/myprofile">Profile</a>
			<a href="/feed">My Feed</a>
			<a href="/dashboard">Wall</a>
		</div>

		<div class="split left">
			<form name="addfriendForm" onsubmit="addFriend()">
				<h2>Add Friend</h2>
				<label>Your Friend's Username </label><br>
				<input type="text" name="friend_username" required>
				<br><br>
				<label>Say something to your friend</label><br>
				<textarea name="message" rows="3" cols="25">Hi! Let's make friend!</textarea><br>
				<input type="button" value="Add Friend" onclick="addFriend()">
				<br><br>
			</form>
		</div>

		<div class="split right">
			<h2>View Friend Request</h2>
			<!--This will be load as list of pending requests-->
			%s
			<hr>
			<h2>View Friend List</h2>
			<!--This will be load as friends list-->
			%s
		</div>
	</body>
</html>
